"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),FlashcardApp=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://gist.githubusercontent.com/vergilius/6d869a7448e405cb52d782120b77b82c/raw/e75dc7c19b918a9f0f5684595899dba2e5ad4f43/history-flashcards.json";_classCallCheck(this,t),this.onBtnClick=function(t){t.preventDefault();var n=t.target.innerHTML.toString().toLowerCase();n===e.correctAnswer?(e.nextQuestion(),e.totalCorrect=e.totalCorrect+1,e.playCorrectSound()):(e.wrongAnswer(),e.nextQuestion(),e.playIncorrectSound())},this.url=n,this.data=[],this.questionNumber=0,this.questionsCount=0,this.correctAnswer="",this.totalCorrect=0,this.totalWrong=0,this.deckHolder=document.querySelector(".js-deck-wrapper"),this.flashcardHolder=document.querySelector(".js-flashcard"),this.questionTextHolder=document.querySelector(".js-flashcard__text"),this.answersWrapperHolder=document.querySelector(".js-flashcard__buttons-wrapper"),this.answersHolder=document.querySelectorAll(".js-flashcard__btn"),this.resultsHolder=document.querySelector(".c-results"),this.correctSound=document.querySelector(".js-correct-sound"),this.incorrectSound=document.querySelector(".js-incorrect-sound"),this.resultsSound=document.querySelector(".js-results-sound"),this.answersHolder.forEach(function(t){return t.addEventListener("click",e.onBtnClick)}),this.init()}return _createClass(t,[{key:"init",value:function(){var t=this,e=this.url;fetch(e).then(function(t){return t.json()}).then(function(e){return t.data=e}).then(function(){return t.insertQuestionText()}).then(function(){return t.insertAnswers()}).then(function(){return t.updateAnswersInState()}).then(function(){return t.bindClickEvent()}).then(function(){return t.countQuestions()})["catch"](function(t){return console.log(t)})}},{key:"insertQuestionText",value:function(){var t=this.data,e=this.questionNumber,n=this.questionTextHolder,r=t[e].question;n.innerHTML=r}},{key:"insertAnswers",value:function(){var t=this.data,e=this.questionNumber,n=this.answersWrapperHolder,r=t[e].answers,s=r.map(function(t,e){return'\n\t\t\t\t<button class="c-flashcard__btn js-flashcard__btn">'+t.answer+"</button>\n\t\t\t"});n.innerHTML="",s.forEach(function(t,e){n.innerHTML+=s[e]}),this.updateAnswersInState(),this.bindClickEvent(),this.setCorrectAnswer(r)}},{key:"bindClickEvent",value:function(){var t=this;this.answersHolder.forEach(function(e){return e.addEventListener("click",t.onBtnClick)})}},{key:"updateAnswersInState",value:function(){this.answersHolder=document.querySelectorAll(".js-flashcard__btn")}},{key:"countQuestions",value:function(){var t=this.data,e=t.length;this.questionsCount=e}},{key:"setCorrectAnswer",value:function(t){var e=t.filter(function(t){return 1==t.correct});e=e[0].answer.toLowerCase(),this.correctAnswer=e}},{key:"nextQuestion",value:function(){this.questionNumber!==this.questionsCount-1?(this.questionNumber=this.questionNumber+1,this.insertAnswers(),this.insertQuestionText()):this.showResult()}},{key:"wrongAnswer",value:function(){var t=this.questionNumber,e=(this.questionsCount,this.totalWrong,this.data),n=e.filter(function(e,n){return n===t}),r=Object.assign.apply(Object,[{}].concat(_toConsumableArray(n)));e.push(r),this.questionsCount=this.questionsCount+1,this.totalWrong=this.totalWrong+1}},{key:"showResult",value:function(){var t=this.resultsHolder,e=this.deckHolder,n=this.totalWrong,r=this.totalCorrect;e.remove(),t.innerHTML='\n\t\t\t<p class="c-results__correct">Number of correct answers: '+(r+1)+'</p>\n\t\t\t<p class="c-results__wrong">Number of wrong answers: '+n+"</p>\n\t\t",this.playResultsSound()}},{key:"playCorrectSound",value:function(){var t=this.correctSound;t.currentTime=0,t.play()}},{key:"playIncorrectSound",value:function(){var t=this.incorrectSound;t.currentTime=0,t.play()}},{key:"playResultsSound",value:function(){var t=this.resultsSound;t.currentTime=0,t.play()}}]),t}(),flashcardApp=new FlashcardApp("https://gist.githubusercontent.com/vergilius/6d869a7448e405cb52d782120b77b82c/raw/e75dc7c19b918a9f0f5684595899dba2e5ad4f43/history-flashcards.json");